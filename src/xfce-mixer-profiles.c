/* Generated by GOB (v2.0.9) on Mon Nov 22 22:45:37 2004
   (do not edit directly) */

/* End world hunger, donate to the World Food Programme, http://www.wfp.org */

#ifdef HAVE_CONFIG_H
#include <config.h>
#endif
#define GOB_VERSION_MAJOR 2
#define GOB_VERSION_MINOR 0
#define GOB_VERSION_PATCHLEVEL 9

#define selfp (self->_priv)

#include <string.h> /* memset() */

#include "xfce-mixer-profiles.h"

#include "xfce-mixer-profiles-private.h"

#ifdef G_LIKELY
#define ___GOB_LIKELY(expr) G_LIKELY(expr)
#define ___GOB_UNLIKELY(expr) G_UNLIKELY(expr)
#else /* ! G_LIKELY */
#define ___GOB_LIKELY(expr) (expr)
#define ___GOB_UNLIKELY(expr) (expr)
#endif /* G_LIKELY */

#line 1 "mixer-profiles.gob"

#include <gtk/gtk.h>
#include "xfce-mixer-profile.h"
#include "xfce-mixer-pxml.h"

#line 36 "xfce-mixer-profiles.c"

#line 6 "mixer-profiles.gob"

#include <libxfce4util/libxfce4util.h>
#include <my-config.h>
#define emit
#define PROFILES_ROOT "Profiles"
#define PROFILES_CONFIG_FILENAME "profiles.xml"

#ifndef MAX_PATH
#define MAX_PATH 4096
#endif

static void profiles_free (GList *profiles)
{
	GList *g;
	g = profiles;
	while (g) {
		g_object_unref (G_OBJECT (g->data));
		g = g_list_next (g);
	}
	g_list_free (profiles);
}


#line 62 "xfce-mixer-profiles.c"
/* self casting macros */
#define SELF(x) XFCE_MIXER_PROFILES(x)
#define SELF_CONST(x) XFCE_MIXER_PROFILES_CONST(x)
#define IS_SELF(x) XFCE_IS_MIXER_PROFILES(x)
#define TYPE_SELF XFCE_TYPE_MIXER_PROFILES
#define SELF_CLASS(x) XFCE_MIXER_PROFILES_CLASS(x)

#define SELF_GET_CLASS(x) XFCE_MIXER_PROFILES_GET_CLASS(x)

/* self typedefs */
typedef XfceMixerProfiles Self;
typedef XfceMixerProfilesClass SelfClass;

/* here are local prototypes */
static void xfce_mixer_profiles_class_init (XfceMixerProfilesClass * c) G_GNUC_UNUSED;
static void xfce_mixer_profiles_init (XfceMixerProfiles * self) G_GNUC_UNUSED;

/*
 * Signal connection wrapper macro shortcuts
 */
#define self_connect__profiles_changed(object,func,data)	xfce_mixer_profiles_connect__profiles_changed((object),(func),(data))
#define self_connect_after__profiles_changed(object,func,data)	xfce_mixer_profiles_connect_after__profiles_changed((object),(func),(data))
#define self_connect_data__profiles_changed(object,func,data,destroy_data,flags)	xfce_mixer_profiles_connect_data__profiles_changed((object),(func),(data),(destroy_data),(flags))

enum {
	PROFILES_CHANGED_SIGNAL,
	LAST_SIGNAL
};

static guint object_signals[LAST_SIGNAL] = {0};

/* pointer to the class of our parent */
static GObjectClass *parent_class = NULL;

/* Short form macros */
#define self_profiles_changed xfce_mixer_profiles_profiles_changed
#define self_clear xfce_mixer_profiles_clear
#define self_get_profile_names xfce_mixer_profiles_get_profile_names
#define self_goto_device xfce_mixer_profiles_goto_device
#define self_load_profile xfce_mixer_profiles_load_profile
#define self_load xfce_mixer_profiles_load
#define self_xml_text_child xfce_mixer_profiles_xml_text_child
#define self_save_profile xfce_mixer_profiles_save_profile
#define self_save xfce_mixer_profiles_save
#define self_add_profile xfce_mixer_profiles_add_profile
#define self_get_profile xfce_mixer_profiles_get_profile
#define self_delete_profile xfce_mixer_profiles_delete_profile
#define self_set_modified xfce_mixer_profiles_set_modified
#define self_delayed_pc_cb xfce_mixer_profiles_delayed_pc_cb
#define self_get_modified xfce_mixer_profiles_get_modified
#define self_new xfce_mixer_profiles_new
GType
xfce_mixer_profiles_get_type (void)
{
	static GType type = 0;

	if ___GOB_UNLIKELY(type == 0) {
		static const GTypeInfo info = {
			sizeof (XfceMixerProfilesClass),
			(GBaseInitFunc) NULL,
			(GBaseFinalizeFunc) NULL,
			(GClassInitFunc) xfce_mixer_profiles_class_init,
			(GClassFinalizeFunc) NULL,
			NULL /* class_data */,
			sizeof (XfceMixerProfiles),
			0 /* n_preallocs */,
			(GInstanceInitFunc) xfce_mixer_profiles_init,
			NULL
		};

		type = g_type_register_static (G_TYPE_OBJECT, "XfceMixerProfiles", &info, (GTypeFlags)0);
	}

	return type;
}

/* a macro for creating a new object of our type */
#define GET_NEW ((XfceMixerProfiles *)g_object_new(xfce_mixer_profiles_get_type(), NULL))

/* a function for creating a new object of our type */
#include <stdarg.h>
static XfceMixerProfiles * GET_NEW_VARG (const char *first, ...) G_GNUC_UNUSED;
static XfceMixerProfiles *
GET_NEW_VARG (const char *first, ...)
{
	XfceMixerProfiles *ret;
	va_list ap;
	va_start (ap, first);
	ret = (XfceMixerProfiles *)g_object_new_valist (xfce_mixer_profiles_get_type (), first, ap);
	va_end (ap);
	return ret;
}


static void
___dispose (GObject *obj_self)
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profiles::dispose"
	XfceMixerProfiles *self G_GNUC_UNUSED = XFCE_MIXER_PROFILES (obj_self);
	if (G_OBJECT_CLASS (parent_class)->dispose) \
		(* G_OBJECT_CLASS (parent_class)->dispose) (obj_self);
#line 62 "mixer-profiles.gob"
	if(self->xml) { ((*(void (*)(void *))g_object_unref)) (self->xml); self->xml = NULL; }
#line 166 "xfce-mixer-profiles.c"
}
#undef __GOB_FUNCTION__


static void
___finalize(GObject *obj_self)
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profiles::finalize"
	XfceMixerProfiles *self  G_GNUC_UNUSED = XFCE_MIXER_PROFILES (obj_self);
	if(G_OBJECT_CLASS(parent_class)->finalize) \
		(* G_OBJECT_CLASS(parent_class)->finalize)(obj_self);
#define device (self->device)
#define VAR device
	{
#line 32 "mixer-profiles.gob"
	
			if (VAR) {
				g_free (VAR);
				VAR = NULL;
			}
		}
#line 188 "xfce-mixer-profiles.c"
	memset(&device, 0, sizeof(device));
#undef VAR
#undef device
#define fname (self->fname)
#define VAR fname
	{
#line 40 "mixer-profiles.gob"
	
			if (VAR) {
				g_free (VAR);
				VAR = NULL;
			}
		}
#line 202 "xfce-mixer-profiles.c"
	memset(&fname, 0, sizeof(fname));
#undef VAR
#undef fname
#define profilesChangedDelayed (self->profilesChangedDelayed)
#define VAR profilesChangedDelayed
	{
#line 50 "mixer-profiles.gob"
	
			if (VAR) g_source_remove (VAR);
			VAR = 0;
		}
#line 214 "xfce-mixer-profiles.c"
	memset(&profilesChangedDelayed, 0, sizeof(profilesChangedDelayed));
#undef VAR
#undef profilesChangedDelayed
#define profiles (self->profiles)
#define VAR profiles
	{
#line 56 "mixer-profiles.gob"
	
			profiles_free(VAR);
			VAR = NULL;
		}
#line 226 "xfce-mixer-profiles.c"
	memset(&profiles, 0, sizeof(profiles));
#undef VAR
#undef profiles
}
#undef __GOB_FUNCTION__

static void 
xfce_mixer_profiles_class_init (XfceMixerProfilesClass * c G_GNUC_UNUSED)
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profiles::class_init"
	GObjectClass *g_object_class G_GNUC_UNUSED = (GObjectClass*) c;

	parent_class = g_type_class_ref (G_TYPE_OBJECT);

	object_signals[PROFILES_CHANGED_SIGNAL] =
		g_signal_new ("profiles_changed",
			G_TYPE_FROM_CLASS (g_object_class),
			(GSignalFlags)(G_SIGNAL_RUN_FIRST | G_SIGNAL_ACTION),
			G_STRUCT_OFFSET (XfceMixerProfilesClass, profiles_changed),
			NULL, NULL,
			g_cclosure_marshal_VOID__VOID,
			G_TYPE_NONE, 0);

	c->profiles_changed = NULL;
	g_object_class->dispose = ___dispose;
	g_object_class->finalize = ___finalize;
}
#undef __GOB_FUNCTION__
#line 69 "mixer-profiles.gob"
static void 
xfce_mixer_profiles_init (XfceMixerProfiles * self G_GNUC_UNUSED)
#line 258 "xfce-mixer-profiles.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profiles::init"
#line 6 "mixer-profiles.gob"
	self->device = NULL;
#line 263 "xfce-mixer-profiles.c"
#line 32 "mixer-profiles.gob"
	self->fname = NULL;
#line 266 "xfce-mixer-profiles.c"
#line 40 "mixer-profiles.gob"
	self->modified = FALSE;
#line 269 "xfce-mixer-profiles.c"
#line 40 "mixer-profiles.gob"
	self->weird_number = 0;
#line 272 "xfce-mixer-profiles.c"
#line 40 "mixer-profiles.gob"
	self->profilesChangedDelayed = 0;
#line 275 "xfce-mixer-profiles.c"
#line 50 "mixer-profiles.gob"
	self->profiles = NULL;
#line 278 "xfce-mixer-profiles.c"
#line 56 "mixer-profiles.gob"
	self->xml = NULL;
#line 281 "xfce-mixer-profiles.c"
 {
#line 70 "mixer-profiles.gob"

		gchar *tpath;
		self->fname = g_strdup (PROFILES_CONFIG_FILENAME);

		self->xml = xfce_mixer_pxml_new (PROFILES_ROOT);
		tpath = my_config_get_path (self->fname, CONFIG_LOAD);
		if (tpath) {
			g_object_set (G_OBJECT (self->xml), "fname", tpath, NULL);
			g_free (tpath);
		}
	
#line 295 "xfce-mixer-profiles.c"
 }
}
#undef __GOB_FUNCTION__


#line 64 "mixer-profiles.gob"
void 
xfce_mixer_profiles_profiles_changed (XfceMixerProfiles * self)
#line 304 "xfce-mixer-profiles.c"
{
	GValue ___param_values[1];
	GValue ___return_val;

memset (&___return_val, 0, sizeof (___return_val));
memset (&___param_values, 0, sizeof (___param_values));

#line 64 "mixer-profiles.gob"
	g_return_if_fail (self != NULL);
#line 64 "mixer-profiles.gob"
	g_return_if_fail (XFCE_IS_MIXER_PROFILES (self));
#line 316 "xfce-mixer-profiles.c"

	___param_values[0].g_type = 0;
	g_value_init (&___param_values[0], G_TYPE_FROM_INSTANCE (self));
	g_value_set_instance (&___param_values[0], (gpointer) self);

	g_signal_emitv (___param_values,
		object_signals[PROFILES_CHANGED_SIGNAL],
		0 /* detail */,
		&___return_val);

	g_value_unset (&___param_values[0]);
}


#line 82 "mixer-profiles.gob"
void 
xfce_mixer_profiles_clear (XfceMixerProfiles * self)
#line 334 "xfce-mixer-profiles.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profiles::clear"
#line 82 "mixer-profiles.gob"
	g_return_if_fail (self != NULL);
#line 82 "mixer-profiles.gob"
	g_return_if_fail (XFCE_IS_MIXER_PROFILES (self));
#line 341 "xfce-mixer-profiles.c"
{
#line 83 "mixer-profiles.gob"
	
		profiles_free (self->profiles);
		self->weird_number = 0;
		self->profiles = NULL;
	}}
#line 349 "xfce-mixer-profiles.c"
#undef __GOB_FUNCTION__

#line 89 "mixer-profiles.gob"
GList * 
xfce_mixer_profiles_get_profile_names (XfceMixerProfiles * self)
#line 355 "xfce-mixer-profiles.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profiles::get_profile_names"
#line 89 "mixer-profiles.gob"
	g_return_val_if_fail (self != NULL, (GList * )0);
#line 89 "mixer-profiles.gob"
	g_return_val_if_fail (XFCE_IS_MIXER_PROFILES (self), (GList * )0);
#line 362 "xfce-mixer-profiles.c"
{
#line 90 "mixer-profiles.gob"
	
		GList *g;
		GList *gn;
		XfceMixerProfile *p;
		gchar const *so;
		gn = NULL;
		g = self->profiles;
		while (g) {
			p = XFCE_MIXER_PROFILE (g->data);
			so = xfce_mixer_profile_get_title (p);

			gn = g_list_append (gn, g_strdup (so));

			g = g_list_next (g);
		}

		return gn;
	}}
#line 383 "xfce-mixer-profiles.c"
#undef __GOB_FUNCTION__

#line 109 "mixer-profiles.gob"
void 
xfce_mixer_profiles_goto_device (XfceMixerProfiles * self)
#line 389 "xfce-mixer-profiles.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profiles::goto_device"
#line 109 "mixer-profiles.gob"
	g_return_if_fail (self != NULL);
#line 109 "mixer-profiles.gob"
	g_return_if_fail (XFCE_IS_MIXER_PROFILES (self));
#line 396 "xfce-mixer-profiles.c"
{
#line 110 "mixer-profiles.gob"
	
		gchar *n;
		xfce_mixer_pxml_goto_root (self->xml);
		xfce_mixer_pxml_goto_children (self->xml);
		while (self->xml->node) {
			if (xfce_mixer_pxml_check_tag (self->xml, "device")) {
				n = xfce_mixer_pxml_get_prop (self->xml, "name");
				if (n && self->device && g_str_equal (n, self->device)) {
					g_free (n);
					return;
				}
				if (n)
					g_free (n);
			}

			xfce_mixer_pxml_goto_next (self->xml);
		}

		/* device does not exist yet in xml */
		self->xml->node = NULL;
		xfce_mixer_pxml_goto_root (self->xml);
		self->xml->node = xfce_mixer_pxml_create_text_child (self->xml, "device", NULL);
		xfce_mixer_pxml_set_prop (self->xml, "name", self->device);
	}}
#line 423 "xfce-mixer-profiles.c"
#undef __GOB_FUNCTION__

#line 135 "mixer-profiles.gob"
void 
xfce_mixer_profiles_load_profile (XfceMixerProfiles * self, XfceMixerProfile * p)
#line 429 "xfce-mixer-profiles.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profiles::load_profile"
#line 135 "mixer-profiles.gob"
	g_return_if_fail (self != NULL);
#line 135 "mixer-profiles.gob"
	g_return_if_fail (XFCE_IS_MIXER_PROFILES (self));
#line 436 "xfce-mixer-profiles.c"
{
#line 136 "mixer-profiles.gob"
	
		xfce_mixer_profile_load (p, self->xml);
	}}
#line 442 "xfce-mixer-profiles.c"
#undef __GOB_FUNCTION__

#line 140 "mixer-profiles.gob"
void 
xfce_mixer_profiles_load (XfceMixerProfiles * self)
#line 448 "xfce-mixer-profiles.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profiles::load"
#line 140 "mixer-profiles.gob"
	g_return_if_fail (self != NULL);
#line 140 "mixer-profiles.gob"
	g_return_if_fail (XFCE_IS_MIXER_PROFILES (self));
#line 455 "xfce-mixer-profiles.c"
{
#line 141 "mixer-profiles.gob"
	
		gchar *tpath;
		gchar *n;
		XfceMixerProfile *p;
		xmlNodePtr parent;
		self_clear (self);

		tpath = my_config_get_path (self->fname, CONFIG_LOAD);
		if (tpath) {
			g_object_set (G_OBJECT (self->xml), "fname", tpath, NULL);
			g_free (tpath);
		}

		self_goto_device (self);

		xfce_mixer_pxml_goto_children (self->xml);
		while (self->xml->node) {
			parent = self->xml->node;
			if (xfce_mixer_pxml_check_tag (self->xml, "profile")) {
				n = xfce_mixer_pxml_get_prop (self->xml, "name");
				if (n) {
					p = XFCE_MIXER_PROFILE (xfce_mixer_profile_new (n));
					if (p) {
						self_load_profile (self, p);

						self_add_profile (self, p);
						g_object_unref (G_OBJECT (p));
					}
				}
			}
			self->xml->node = parent;

			xfce_mixer_pxml_goto_next (self->xml);
		}

	}}
#line 494 "xfce-mixer-profiles.c"
#undef __GOB_FUNCTION__

#line 178 "mixer-profiles.gob"
void 
xfce_mixer_profiles_xml_text_child (XfceMixerProfiles * self, gchar const * tagname)
#line 500 "xfce-mixer-profiles.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profiles::xml_text_child"
#line 178 "mixer-profiles.gob"
	g_return_if_fail (self != NULL);
#line 178 "mixer-profiles.gob"
	g_return_if_fail (XFCE_IS_MIXER_PROFILES (self));
#line 507 "xfce-mixer-profiles.c"
{
#line 179 "mixer-profiles.gob"
	
		self->xml->node = xfce_mixer_pxml_create_text_child (self->xml, tagname, NULL);
	}}
#line 513 "xfce-mixer-profiles.c"
#undef __GOB_FUNCTION__

#line 183 "mixer-profiles.gob"
void 
xfce_mixer_profiles_save_profile (XfceMixerProfiles * self, XfceMixerProfile * p)
#line 519 "xfce-mixer-profiles.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profiles::save_profile"
#line 183 "mixer-profiles.gob"
	g_return_if_fail (self != NULL);
#line 183 "mixer-profiles.gob"
	g_return_if_fail (XFCE_IS_MIXER_PROFILES (self));
#line 526 "xfce-mixer-profiles.c"
{
#line 184 "mixer-profiles.gob"
	
		xfce_mixer_profile_save (p, self->xml);
	}}
#line 532 "xfce-mixer-profiles.c"
#undef __GOB_FUNCTION__

#line 188 "mixer-profiles.gob"
void 
xfce_mixer_profiles_save (XfceMixerProfiles * self)
#line 538 "xfce-mixer-profiles.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profiles::save"
#line 188 "mixer-profiles.gob"
	g_return_if_fail (self != NULL);
#line 188 "mixer-profiles.gob"
	g_return_if_fail (XFCE_IS_MIXER_PROFILES (self));
#line 545 "xfce-mixer-profiles.c"
{
#line 189 "mixer-profiles.gob"
	
		xmlNodePtr profilesx;
		XfceMixerProfile *p;
		GList *g;
		gchar const *n;
		gchar *tpath;
		gchar *tmppath;
		gboolean withtemp;

		if (!self_get_modified (self))
			return;

		withtemp = FALSE;
		tpath = my_config_get_path (self->fname, CONFIG_SAVE);
		if (tpath) {
			tmppath = my_config_get_temp_file_name (tpath);
			withtemp = (tmppath != NULL);

			if (withtemp) {
				g_object_set (G_OBJECT (self->xml), "fname", tmppath, NULL);
				g_free (tmppath);
				tmppath = NULL;
			} else 
				g_object_set (G_OBJECT (self->xml), "fname", tpath, NULL);
		} else
			return;

		xfce_mixer_pxml_goto_root (self->xml);
		self_goto_device (self);

		profilesx = self->xml->node;

		xfce_mixer_pxml_eat_children (self->xml, NULL);

		g = self->profiles;
		while (g) {
			p = XFCE_MIXER_PROFILE (g->data);

			n = xfce_mixer_profile_get_title (p);
			xfce_mixer_pxml_goto_node (self->xml, profilesx);
			self_xml_text_child (self, "profile");
			xfce_mixer_pxml_set_prop (self->xml, "name", n);

			self_save_profile (self, p);
			

			g = g_list_next (g);
		}

		g_object_set (G_OBJECT (self->xml), "fname", NULL, NULL); /* save */

		if (withtemp) {
			/* tpath cannot be NULL */
			my_config_commit_file (tpath);
			g_free (tpath);
		}

		self_set_modified (self, FALSE);
	}}
#line 607 "xfce-mixer-profiles.c"
#undef __GOB_FUNCTION__

#line 249 "mixer-profiles.gob"
void 
xfce_mixer_profiles_add_profile (XfceMixerProfiles * self, XfceMixerProfile * pn)
#line 613 "xfce-mixer-profiles.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profiles::add_profile"
#line 249 "mixer-profiles.gob"
	g_return_if_fail (self != NULL);
#line 249 "mixer-profiles.gob"
	g_return_if_fail (XFCE_IS_MIXER_PROFILES (self));
#line 620 "xfce-mixer-profiles.c"
{
#line 250 "mixer-profiles.gob"
	
		XfceMixerProfile *p;
		gchar const *fixedname;
		gchar tmp[MAX_PATH];
		if (!pn)
			return;

		fixedname = xfce_mixer_profile_get_title (pn);

		if (fixedname)
			g_snprintf (tmp, MAX_PATH, "%s", fixedname);
		else
			g_snprintf (tmp, MAX_PATH, _("profile%d"), ++self->weird_number);

		/* check if name is a dupe */

		p = self_get_profile (self, tmp);
		if (p) {
			g_object_unref (G_OBJECT (p));
			g_snprintf (tmp, MAX_PATH, _("profile%d"), ++self->weird_number);

			p = self_get_profile (self, tmp);
			if (p) { /* hmpf. */
				g_object_unref (G_OBJECT (p));
				return;
			}
		}

		g_object_ref (G_OBJECT (pn));
		self->profiles = g_list_append (self->profiles, pn);
		self_set_modified (self, TRUE);
	}}
#line 655 "xfce-mixer-profiles.c"
#undef __GOB_FUNCTION__

#line 290 "mixer-profiles.gob"
XfceMixerProfile * 
xfce_mixer_profiles_get_profile (XfceMixerProfiles * self, gchar const * name)
#line 661 "xfce-mixer-profiles.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profiles::get_profile"
#line 290 "mixer-profiles.gob"
	g_return_val_if_fail (self != NULL, (XfceMixerProfile * )0);
#line 290 "mixer-profiles.gob"
	g_return_val_if_fail (XFCE_IS_MIXER_PROFILES (self), (XfceMixerProfile * )0);
#line 668 "xfce-mixer-profiles.c"
{
#line 291 "mixer-profiles.gob"
	
		GList *g;
		gchar const *s;
		g = self->profiles;
		if (!name)
			return NULL;

		while (g) {
			s = xfce_mixer_profile_get_title (XFCE_MIXER_PROFILE (g->data));
			if (s) {
				if (g_str_equal (s, name)) {
					g_object_ref (G_OBJECT (g->data));
					return XFCE_MIXER_PROFILE (g->data);
				}
			}
			g = g_list_next (g);
		}

		return NULL;
	}}
#line 691 "xfce-mixer-profiles.c"
#undef __GOB_FUNCTION__

#line 312 "mixer-profiles.gob"
void 
xfce_mixer_profiles_delete_profile (XfceMixerProfiles * self, gchar const * name)
#line 697 "xfce-mixer-profiles.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profiles::delete_profile"
#line 312 "mixer-profiles.gob"
	g_return_if_fail (self != NULL);
#line 312 "mixer-profiles.gob"
	g_return_if_fail (XFCE_IS_MIXER_PROFILES (self));
#line 704 "xfce-mixer-profiles.c"
{
#line 313 "mixer-profiles.gob"
	
		XfceMixerProfile *p;
		if (!name)
			return;

		p = self_get_profile (self, name);
		if (p) {
			g_object_unref (G_OBJECT (p));
			g_object_unref (G_OBJECT (p));
			self->profiles = g_list_remove (self->profiles, p);
			self_set_modified (self, TRUE);
		}
	}}
#line 720 "xfce-mixer-profiles.c"
#undef __GOB_FUNCTION__

#line 327 "mixer-profiles.gob"
void 
xfce_mixer_profiles_set_modified (XfceMixerProfiles * self, gboolean modi)
#line 726 "xfce-mixer-profiles.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profiles::set_modified"
#line 327 "mixer-profiles.gob"
	g_return_if_fail (self != NULL);
#line 327 "mixer-profiles.gob"
	g_return_if_fail (XFCE_IS_MIXER_PROFILES (self));
#line 733 "xfce-mixer-profiles.c"
{
#line 328 "mixer-profiles.gob"
	
		self->modified = modi;
		if (modi) {
			if (self->profilesChangedDelayed) {
				g_source_remove (self->profilesChangedDelayed);
				self->profilesChangedDelayed = 0;
			}

			self->profilesChangedDelayed = g_timeout_add (500, 
				(GSourceFunc)self_delayed_pc_cb, self);
		}
	}}
#line 748 "xfce-mixer-profiles.c"
#undef __GOB_FUNCTION__

#line 341 "mixer-profiles.gob"
gboolean 
xfce_mixer_profiles_delayed_pc_cb (XfceMixerProfiles * self)
#line 754 "xfce-mixer-profiles.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profiles::delayed_pc_cb"
#line 341 "mixer-profiles.gob"
	g_return_val_if_fail (self != NULL, (gboolean )0);
#line 341 "mixer-profiles.gob"
	g_return_val_if_fail (XFCE_IS_MIXER_PROFILES (self), (gboolean )0);
#line 761 "xfce-mixer-profiles.c"
{
#line 342 "mixer-profiles.gob"
	
		emit self_profiles_changed (self);
		return FALSE;
	}}
#line 768 "xfce-mixer-profiles.c"
#undef __GOB_FUNCTION__

#line 347 "mixer-profiles.gob"
gboolean 
xfce_mixer_profiles_get_modified (XfceMixerProfiles * self)
#line 774 "xfce-mixer-profiles.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profiles::get_modified"
#line 347 "mixer-profiles.gob"
	g_return_val_if_fail (self != NULL, (gboolean )0);
#line 347 "mixer-profiles.gob"
	g_return_val_if_fail (XFCE_IS_MIXER_PROFILES (self), (gboolean )0);
#line 781 "xfce-mixer-profiles.c"
{
#line 348 "mixer-profiles.gob"
	
		return self->modified;
	}}
#line 787 "xfce-mixer-profiles.c"
#undef __GOB_FUNCTION__

#line 352 "mixer-profiles.gob"
XfceMixerProfiles * 
xfce_mixer_profiles_new (gchar const * device)
#line 793 "xfce-mixer-profiles.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profiles::new"
{
#line 353 "mixer-profiles.gob"
	
		XfceMixerProfiles *p;
		p = XFCE_MIXER_PROFILES (GET_NEW);
		p->device = g_strdup (device);
		return p;
	}}
#line 804 "xfce-mixer-profiles.c"
#undef __GOB_FUNCTION__
