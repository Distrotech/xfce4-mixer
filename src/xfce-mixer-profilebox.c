/* Generated by GOB (v2.0.6) on Sat Jan 10 20:47:05 2004
   (do not edit directly) */

/* End world hunger, donate to the World Food Programme, http://www.wfp.org */

#define GOB_VERSION_MAJOR 2
#define GOB_VERSION_MINOR 0
#define GOB_VERSION_PATCHLEVEL 6

#define selfp (self->_priv)

#include "xfce-mixer-profilebox.h"

#include "xfce-mixer-profilebox-private.h"

#ifdef G_LIKELY
#define ___GOB_LIKELY(expr) G_LIKELY(expr)
#define ___GOB_UNLIKELY(expr) G_UNLIKELY(expr)
#else /* ! G_LIKELY */
#define ___GOB_LIKELY(expr) (expr)
#define ___GOB_UNLIKELY(expr) (expr)
#endif /* G_LIKELY */

#line 1 "mixer-profilebox.gob"

#ifdef HAVE_CONFIG_H
#include <config.h>
#endif

#line 31 "xfce-mixer-profilebox.c"

#line 6 "mixer-profilebox.gob"

#include <gtk/gtk.h>
#include "xfce-mixer-profilebox-detail.h"

#line 38 "xfce-mixer-profilebox.c"

#line 10 "mixer-profilebox.gob"

#include <libxfce4util/i18n.h>
#define NO_TREE_CHECK_COLUMN
#include "helpers3.inc"
#include "stringlist.inc"

static void profile_insert_cb (GtkWidget *w, gpointer user_data);
static void profile_delete_cb (GtkWidget *w, gpointer user_data);

static void each_selstring_cb (GtkTreeModel *model, GtkTreePath *path, GtkTreeIter *iter, gpointer data)
{
	GList **gg;
	gchar *s;
	gg = (GList **)data;

	gtk_tree_model_get (model, iter, 0, &s, -1);
	if (s) {
		*gg = g_list_append (*gg, s);
	}
}


#line 63 "xfce-mixer-profilebox.c"
/* self casting macros */
#define SELF(x) XFCE_MIXER_PROFILEBOX(x)
#define SELF_CONST(x) XFCE_MIXER_PROFILEBOX_CONST(x)
#define IS_SELF(x) XFCE_IS_MIXER_PROFILEBOX(x)
#define TYPE_SELF XFCE_TYPE_MIXER_PROFILEBOX
#define SELF_CLASS(x) XFCE_MIXER_PROFILEBOX_CLASS(x)

#define SELF_GET_CLASS(x) XFCE_MIXER_PROFILEBOX_GET_CLASS(x)

/* self typedefs */
typedef XfceMixerProfilebox Self;
typedef XfceMixerProfileboxClass SelfClass;

/* here are local prototypes */
static void xfce_mixer_profilebox_class_init (XfceMixerProfileboxClass * c) G_GNUC_UNUSED;
static void xfce_mixer_profilebox_init (XfceMixerProfilebox * self) G_GNUC_UNUSED;

/* pointer to the class of our parent */
static GtkVBoxClass *parent_class = NULL;

/* Short form macros */
#if defined(__GNUC__) && !defined(__STRICT_ANSI__)
#define self_row_inserted_cb(args...) xfce_mixer_profilebox_row_inserted_cb(args)
#define self_row_deleted_cb(args...) xfce_mixer_profilebox_row_deleted_cb(args)
#define self_rowcnt_updated_cb(args...) xfce_mixer_profilebox_rowcnt_updated_cb(args)
#define self_profile_insert_cb(args...) xfce_mixer_profilebox_profile_insert_cb(args)
#define self_profile_delete_cb(args...) xfce_mixer_profilebox_profile_delete_cb(args)
#define self_profiles_updated(args...) xfce_mixer_profilebox_profiles_updated(args)
#define self_new_dlg(args...) xfce_mixer_profilebox_new_dlg(args)
#define self_new() xfce_mixer_profilebox_new()
#endif /* __GNUC__ && !__STRICT_ANSI__ */

/* Short form pointers */
static void (* const self_row_inserted_cb) (XfceMixerProfilebox * self, GtkTreePath * path, GtkTreeIter * iter, GtkTreeModel * model) = xfce_mixer_profilebox_row_inserted_cb;
static void (* const self_row_deleted_cb) (XfceMixerProfilebox * self, GtkTreePath * path, GtkTreeModel * model) = xfce_mixer_profilebox_row_deleted_cb;
static void (* const self_rowcnt_updated_cb) (XfceMixerProfilebox * self) = xfce_mixer_profilebox_rowcnt_updated_cb;
static void (* const self_profile_insert_cb) (XfceMixerProfilebox * self) = xfce_mixer_profilebox_profile_insert_cb;
static void (* const self_profile_delete_cb) (XfceMixerProfilebox * self) = xfce_mixer_profilebox_profile_delete_cb;
static void (* const self_profiles_updated) (XfceMixerProfilebox * self) = xfce_mixer_profilebox_profiles_updated;
static void (* const self_new_dlg) (XfceMixerProfilebox * self) = xfce_mixer_profilebox_new_dlg;
static XfceMixerProfilebox * (* const self_new) (void) = xfce_mixer_profilebox_new;

GType
xfce_mixer_profilebox_get_type (void)
{
	static GType type = 0;

	if ___GOB_UNLIKELY(type == 0) {
		static const GTypeInfo info = {
			sizeof (XfceMixerProfileboxClass),
			(GBaseInitFunc) NULL,
			(GBaseFinalizeFunc) NULL,
			(GClassInitFunc) xfce_mixer_profilebox_class_init,
			(GClassFinalizeFunc) NULL,
			NULL /* class_data */,
			sizeof (XfceMixerProfilebox),
			0 /* n_preallocs */,
			(GInstanceInitFunc) xfce_mixer_profilebox_init,
		};

		type = g_type_register_static (GTK_TYPE_VBOX, "XfceMixerProfilebox", &info, (GTypeFlags)0);
	}

	return type;
}

/* a macro for creating a new object of our type */
#define GET_NEW ((XfceMixerProfilebox *)g_object_new(xfce_mixer_profilebox_get_type(), NULL))

/* a function for creating a new object of our type */
#include <stdarg.h>
static XfceMixerProfilebox * GET_NEW_VARG (const char *first, ...) G_GNUC_UNUSED;
static XfceMixerProfilebox *
GET_NEW_VARG (const char *first, ...)
{
	XfceMixerProfilebox *ret;
	va_list ap;
	va_start (ap, first);
	ret = (XfceMixerProfilebox *)g_object_new_valist (xfce_mixer_profilebox_get_type (), first, ap);
	va_end (ap);
	return ret;
}

static void 
xfce_mixer_profilebox_class_init (XfceMixerProfileboxClass * c)
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profilebox::class_init"

	parent_class = g_type_class_ref (GTK_TYPE_VBOX);

	return;
	c = NULL;
}
#undef __GOB_FUNCTION__
#line 48 "mixer-profilebox.gob"
static void 
xfce_mixer_profilebox_init (XfceMixerProfilebox * self)
#line 161 "xfce-mixer-profilebox.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profilebox::init"
#line 10 "mixer-profilebox.gob"
	self->detail = NULL;
#line 166 "xfce-mixer-profilebox.c"
 {
#line 49 "mixer-profilebox.gob"

		GtkBox *devbox;
		GtkWidget *d1label;
		GtkWidget *dal;
		devbox = GTK_BOX (gtk_hbox_new (FALSE, 5));
		d1label = gtk_label_new (_("Device:"));
		gtk_widget_show (GTK_WIDGET (d1label));
		gtk_box_pack_start (devbox, d1label, FALSE, FALSE, 0);

		self->device_label = GTK_LABEL (gtk_label_new ("(TODO)"));
		gtk_widget_show (GTK_WIDGET (self->device_label));

		gtk_box_pack_start (devbox, GTK_WIDGET (self->device_label), FALSE, FALSE, 0);
		gtk_widget_show (GTK_WIDGET (devbox));

		self->hbox = GTK_BOX (gtk_hbox_new (FALSE, 0));
		gtk_widget_show (GTK_WIDGET (self->hbox));

		dal = gtk_alignment_new (0.5, 0.5, 0.0, 0.0);
		gtk_widget_show (GTK_WIDGET (dal));

		gtk_container_add (GTK_CONTAINER (dal), GTK_WIDGET (devbox));

		self->sep2 = gtk_hseparator_new ();
		gtk_widget_show (self->sep2);

		gtk_box_pack_start (GTK_BOX (self), GTK_WIDGET (dal), FALSE, FALSE, 0);
		gtk_box_pack_start (GTK_BOX (self), GTK_WIDGET (self->sep2), FALSE, FALSE, 3);
		gtk_box_pack_start (GTK_BOX (self), GTK_WIDGET (self->hbox), TRUE, TRUE, 3);

		self->detail = xfce_mixer_profilebox_detail_new ();
		gtk_widget_show (GTK_WIDGET (self->detail));

		self->sep1 = gtk_vseparator_new ();
		gtk_widget_show (self->sep1);

		self->profiles_box = GTK_BOX (gtk_vbox_new (FALSE, 0));
		gtk_widget_show (GTK_WIDGET (self->profiles_box));

		self->profiles_toolbar = GTK_TOOLBAR (gtk_toolbar_new ());

#if 0
		gtk_toolbar_append_item (self->profiles_toolbar,
			"test", "testtip", NULL, NULL/*icon*/, NULL/*callback*/,
			NULL/*user_data*/
		);
#endif

		gtk_toolbar_set_style (self->profiles_toolbar,
			GTK_TOOLBAR_ICONS
		);

		self->profiles_insert_button =
			gtk_toolbar_insert_stock (self->profiles_toolbar,
			GTK_STOCK_ADD,
			_("Create new profile"),
			NULL,
			(GtkSignalFunc)profile_insert_cb /*cb*/,
			(gpointer)self,
			-1
		);
		self->profiles_delete_button =
			gtk_toolbar_insert_stock (self->profiles_toolbar,
			GTK_STOCK_REMOVE,
			_("Delete this profile"),
			NULL,
			(GtkSignalFunc)profile_delete_cb /*cb*/,
			(gpointer)self,
			-1
		);

		gtk_widget_show (GTK_WIDGET (self->profiles_toolbar));

		self->profiles_sw = GTK_SCROLLED_WINDOW (gtk_scrolled_window_new (NULL, NULL));
		gtk_scrolled_window_set_policy (self->profiles_sw, GTK_POLICY_NEVER, GTK_POLICY_AUTOMATIC);
		gtk_widget_show (GTK_WIDGET (self->profiles_sw));

		self->profiles_model = GTK_TREE_STORE (gtk_tree_store_new (1, G_TYPE_STRING));

		self->profiles_tv = GTK_TREE_VIEW (gtk_tree_view_new ());
		gtk_tree_view_set_model (self->profiles_tv, GTK_TREE_MODEL (self->profiles_model));

		gtk_tree_view_append_column (self->profiles_tv, 
			tree_new_text_column ("Profile", 0
		));

		gtk_tree_view_set_headers_visible (self->profiles_tv, FALSE);

		gtk_widget_show (GTK_WIDGET (self->profiles_tv));

		gtk_container_add (GTK_CONTAINER (self->profiles_sw), GTK_WIDGET (self->profiles_tv));

		gtk_box_pack_start (GTK_BOX (self->profiles_box), GTK_WIDGET (self->profiles_toolbar), FALSE, FALSE, 0);
		gtk_box_pack_start (GTK_BOX (self->profiles_box), GTK_WIDGET (self->profiles_sw), TRUE, TRUE, 0);

		gtk_box_pack_start (GTK_BOX (self->hbox), GTK_WIDGET (self->profiles_box), TRUE, TRUE, 0);
		gtk_box_pack_start (GTK_BOX (self->hbox), GTK_WIDGET (self->sep1), FALSE, FALSE, 0);
		gtk_box_pack_start (GTK_BOX (self->hbox), GTK_WIDGET (self->detail), TRUE, TRUE, 0);
		gtk_box_set_spacing (GTK_BOX (self->hbox), 3);

		gtk_widget_set_size_request (GTK_WIDGET (self->hbox), -1, 200);

		/*self->profiles_insert_button;*/
		gtk_widget_set_sensitive (self->profiles_delete_button, FALSE);

		g_signal_connect_swapped (G_OBJECT (self->profiles_model),
			"row-inserted", G_CALLBACK (self_row_inserted_cb),
			self);

		g_signal_connect_swapped (G_OBJECT (self->profiles_model),
			"row-deleted", G_CALLBACK (self_row_inserted_cb),
			self);
	
#line 282 "xfce-mixer-profilebox.c"
 }
	return;
	self = NULL;
}
#undef __GOB_FUNCTION__



#line 163 "mixer-profilebox.gob"
void 
xfce_mixer_profilebox_row_inserted_cb (XfceMixerProfilebox * self, GtkTreePath * path, GtkTreeIter * iter, GtkTreeModel * model)
#line 294 "xfce-mixer-profilebox.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profilebox::row_inserted_cb"
#line 163 "mixer-profilebox.gob"
	g_return_if_fail (self != NULL);
#line 163 "mixer-profilebox.gob"
	g_return_if_fail (XFCE_IS_MIXER_PROFILEBOX (self));
#line 301 "xfce-mixer-profilebox.c"
{
#line 164 "mixer-profilebox.gob"
	
		g_warning ("inserted");
		self_rowcnt_updated_cb (self);
	}}
#line 308 "xfce-mixer-profilebox.c"
#undef __GOB_FUNCTION__

#line 169 "mixer-profilebox.gob"
void 
xfce_mixer_profilebox_row_deleted_cb (XfceMixerProfilebox * self, GtkTreePath * path, GtkTreeModel * model)
#line 314 "xfce-mixer-profilebox.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profilebox::row_deleted_cb"
#line 169 "mixer-profilebox.gob"
	g_return_if_fail (self != NULL);
#line 169 "mixer-profilebox.gob"
	g_return_if_fail (XFCE_IS_MIXER_PROFILEBOX (self));
#line 321 "xfce-mixer-profilebox.c"
{
#line 170 "mixer-profilebox.gob"
	
		g_warning ("deleted");
		self_rowcnt_updated_cb (self);
	}}
#line 328 "xfce-mixer-profilebox.c"
#undef __GOB_FUNCTION__

#line 175 "mixer-profilebox.gob"
void 
xfce_mixer_profilebox_rowcnt_updated_cb (XfceMixerProfilebox * self)
#line 334 "xfce-mixer-profilebox.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profilebox::rowcnt_updated_cb"
#line 175 "mixer-profilebox.gob"
	g_return_if_fail (self != NULL);
#line 175 "mixer-profilebox.gob"
	g_return_if_fail (XFCE_IS_MIXER_PROFILEBOX (self));
#line 341 "xfce-mixer-profilebox.c"
{
#line 176 "mixer-profilebox.gob"
	
		gboolean b;
		b = gtk_tree_model_iter_n_children (GTK_TREE_MODEL (self->profiles_model), NULL) > 0;
		gtk_widget_set_sensitive (GTK_WIDGET (self->profiles_delete_button), b);
	}}
#line 349 "xfce-mixer-profilebox.c"
#undef __GOB_FUNCTION__

#line 182 "mixer-profilebox.gob"
void 
xfce_mixer_profilebox_profile_insert_cb (XfceMixerProfilebox * self)
#line 355 "xfce-mixer-profilebox.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profilebox::profile_insert_cb"
#line 182 "mixer-profilebox.gob"
	g_return_if_fail (self != NULL);
#line 182 "mixer-profilebox.gob"
	g_return_if_fail (XFCE_IS_MIXER_PROFILEBOX (self));
#line 362 "xfce-mixer-profilebox.c"
{
#line 183 "mixer-profilebox.gob"
	
		self_new_dlg (self);
	}}
#line 368 "xfce-mixer-profilebox.c"
#undef __GOB_FUNCTION__

#line 187 "mixer-profilebox.gob"
void 
xfce_mixer_profilebox_profile_delete_cb (XfceMixerProfilebox * self)
#line 374 "xfce-mixer-profilebox.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profilebox::profile_delete_cb"
#line 187 "mixer-profilebox.gob"
	g_return_if_fail (self != NULL);
#line 187 "mixer-profilebox.gob"
	g_return_if_fail (XFCE_IS_MIXER_PROFILEBOX (self));
#line 381 "xfce-mixer-profilebox.c"
{
#line 188 "mixer-profilebox.gob"
	
		GtkTreeSelection *sels;
		GList *g;
		sels = gtk_tree_view_get_selection (self->profiles_tv);
		if (!sels)
			return;

		g = NULL;

		gtk_tree_selection_selected_foreach (sels, each_selstring_cb, (gpointer) &g);

		if (!g) /* nothing selected */
			return;

		/* TODO really delete */

		if (g)
			stringlist_free (g);
	}}
#line 403 "xfce-mixer-profilebox.c"
#undef __GOB_FUNCTION__

#line 208 "mixer-profilebox.gob"
void 
xfce_mixer_profilebox_profiles_updated (XfceMixerProfilebox * self)
#line 409 "xfce-mixer-profilebox.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profilebox::profiles_updated"
#line 208 "mixer-profilebox.gob"
	g_return_if_fail (self != NULL);
#line 208 "mixer-profilebox.gob"
	g_return_if_fail (XFCE_IS_MIXER_PROFILEBOX (self));
#line 416 "xfce-mixer-profilebox.c"
{
#line 209 "mixer-profilebox.gob"
	
		GtkTreeStore *store;
		store = self->profiles_model;

		gtk_tree_store_clear (store);
	}}
#line 425 "xfce-mixer-profilebox.c"
#undef __GOB_FUNCTION__

#line 216 "mixer-profilebox.gob"
void 
xfce_mixer_profilebox_new_dlg (XfceMixerProfilebox * self)
#line 431 "xfce-mixer-profilebox.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profilebox::new_dlg"
#line 216 "mixer-profilebox.gob"
	g_return_if_fail (self != NULL);
#line 216 "mixer-profilebox.gob"
	g_return_if_fail (XFCE_IS_MIXER_PROFILEBOX (self));
#line 438 "xfce-mixer-profilebox.c"
{
#line 217 "mixer-profilebox.gob"
	
		GtkDialog *dlg;
		gchar *s;
		GtkWindow *parent;
		XfceMixerProfileboxDetail *detail;
		parent =  GTK_WINDOW (gtk_widget_get_toplevel (GTK_WIDGET (self)));

		s = g_strdup_printf (
			_("%s - New"),
			gtk_window_get_title (parent)
		);
		dlg = GTK_DIALOG (gtk_dialog_new_with_buttons (
			s, parent,
			GTK_DIALOG_DESTROY_WITH_PARENT | GTK_DIALOG_MODAL,
			GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL,
			GTK_STOCK_OK, GTK_RESPONSE_OK,
			NULL
		));
		g_free (s);

		detail = xfce_mixer_profilebox_detail_new ();
		gtk_widget_show (GTK_WIDGET (detail));
		gtk_box_pack_start (GTK_BOX (dlg->vbox), GTK_WIDGET (detail), TRUE, TRUE, 0);

		gtk_widget_set_size_request (GTK_WIDGET (detail), -1, 200);

		xfce_mixer_profilebox_detail_fill (detail);

		if (gtk_dialog_run (dlg) == GTK_RESPONSE_OK) {
			/* TODO really insert */
		}
		gtk_widget_destroy (GTK_WIDGET (dlg));
	}}
#line 474 "xfce-mixer-profilebox.c"
#undef __GOB_FUNCTION__

#line 251 "mixer-profilebox.gob"
XfceMixerProfilebox * 
xfce_mixer_profilebox_new (void)
#line 480 "xfce-mixer-profilebox.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:Profilebox::new"
{
#line 252 "mixer-profilebox.gob"
	
		return XFCE_MIXER_PROFILEBOX (GET_NEW);
	}}
#line 488 "xfce-mixer-profilebox.c"
#undef __GOB_FUNCTION__


#if (!defined __GNUC__) || (defined __GNUC__ && defined __STRICT_ANSI__)
/*REALLY BAD HACK
  This is to avoid unused warnings if you don't call
  some method.  I need to find a better way to do
  this, not needed in GCC since we use some gcc
  extentions to make saner, faster code */
static void
___xfce_mixer_profilebox_really_bad_hack_to_avoid_warnings(void)
{
	((void (*)(void))GET_NEW_VARG)();
	((void (*)(void))self_row_inserted_cb)();
	((void (*)(void))self_row_deleted_cb)();
	((void (*)(void))self_rowcnt_updated_cb)();
	((void (*)(void))self_profile_insert_cb)();
	((void (*)(void))self_profile_delete_cb)();
	((void (*)(void))self_profiles_updated)();
	((void (*)(void))self_new_dlg)();
	((void (*)(void))self_new)();
	___xfce_mixer_profilebox_really_bad_hack_to_avoid_warnings();
}
#endif /* !__GNUC__ || (__GNUC__ && __STRICT_ANSI__) */


#line 257 "mixer-profilebox.gob"

static void profile_insert_cb (GtkWidget *w, gpointer user_data)
{
	XfceMixerProfilebox *pb;
	pb = XFCE_MIXER_PROFILEBOX (user_data);
	xfce_mixer_profilebox_profile_insert_cb (pb);
}

static void profile_delete_cb (GtkWidget *w, gpointer user_data)
{
	XfceMixerProfilebox *pb;
	pb = XFCE_MIXER_PROFILEBOX (user_data);
	xfce_mixer_profilebox_profile_delete_cb (pb);
}


#line 532 "xfce-mixer-profilebox.c"
