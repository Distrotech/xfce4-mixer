%{
#ifdef HAVE_CONFIG_H
#include <config.h>
#endif
%} 
%a{
#include <gtk/gtk.h>
#include "xfce-mixer-profilebox.h"
%}

class Xfce:Mixer:Profiledlg from Gtk:Dialog {
	protected XfceMixerProfilebox *pbox = NULL;

	init (self)
	{
		self->pbox = xfce_mixer_profilebox_new ();
		gtk_widget_show (GTK_WIDGET (self->pbox));
		gtk_box_pack_start (GTK_BOX (GTK_DIALOG (self)->vbox), 
			GTK_WIDGET (self->pbox), TRUE, TRUE, 0
		);

		gtk_dialog_add_buttons (GTK_DIALOG (self),
			GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL,
			GTK_STOCK_OK, GTK_RESPONSE_OK,
			NULL);

		g_signal_connect_swapped (G_OBJECT (self), "response",
			G_CALLBACK (self_response_cb), self);
	}

	protected void response_cb(self, gint rc, GtkDialog *d)
	{
		if (rc == GTK_RESPONSE_OK) {
			if (self->pbox)
				xfce_mixer_profilebox_save (self->pbox);
		}
	}

	public Xfce:Mixer:Profiledlg *new (void)
	{
		return XFCE_MIXER_PROFILEDLG (GET_NEW);
	}
}

