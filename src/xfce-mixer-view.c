/* Generated by GOB (v2.0.14)   (do not edit directly) */

/* End world hunger, donate to the World Food Programme, http://www.wfp.org */

#define GOB_VERSION_MAJOR 2
#define GOB_VERSION_MINOR 0
#define GOB_VERSION_PATCHLEVEL 14

#define selfp (self->_priv)

#ifdef HAVE_CONFIG_H
#include <config.h>
#endif
#include <string.h> /* memset() */

#include "xfce-mixer-view.h"

#include "xfce-mixer-view-private.h"

#ifdef G_LIKELY
#define ___GOB_LIKELY(expr) G_LIKELY(expr)
#define ___GOB_UNLIKELY(expr) G_UNLIKELY(expr)
#else /* ! G_LIKELY */
#define ___GOB_LIKELY(expr) (expr)
#define ___GOB_UNLIKELY(expr) (expr)
#endif /* G_LIKELY */

#line 1 "mixer-view.gob"

#ifdef HAVE_CONFIG_H
#  include <config.h>
#endif
#include <libxfce4util/libxfce4util.h>

#line 36 "xfce-mixer-view.c"

#line 8 "mixer-view.gob"

#define emit
#define SWITCH_ROWS 0
#define SWITCH_COLUMNS 3
#define SLIDER_HEIGHT 190

#define TRACEY printf

static gboolean 
idle_cb (gpointer data)
{       
	gint width;
	gint height;
	GtkWindow *win;
	win = GTK_WINDOW (data);
	gtk_window_get_size (GTK_WINDOW (win), &width, &height); /* FIXME gtk docs say this is bad */
	gtk_window_resize (GTK_WINDOW (win), width, 1);

	return FALSE;   
}

static void
my_table_allocator (GtkTable *t, gint *tc, gint *tr, XfceMixerControl *c)
{
	if (!tc || !tr)
		return;

	gtk_table_attach_defaults (t,
				GTK_WIDGET (c),
				*tc, (*tc) + 1,
				*tr, (*tr) + 1
			);

	/*gtk_misc_set_alignment (, 0.0, 0.5);*/

	(*tc) ++;
	if ((*tc) >= SWITCH_COLUMNS) {
		*tc = 0;
		(*tr)++;
	}
}


#line 82 "xfce-mixer-view.c"

#line 52 "mixer-view.gob"

#include <gtk/gtk.h>
#include "xfce-mixer-control.h"
#include "xfce-mixer-control-factory.h"
#include "xfce-mixer-profile.h"
#include "xfce-mixer-pxml.h"
#include "disclosure-widget.h"

#line 93 "xfce-mixer-view.c"

#line 61 "mixer-view.gob"

#include "xfce-mixer-control-vc.h"

static void control_list_free(GList *go)
{
	XfceMixerControl *c;
	GList *g;
	if (go) {
		g = g_list_last (go);

		while (g) {
			if (g->data) {
				c = XFCE_MIXER_CONTROL (g->data);
				gtk_widget_destroy (GTK_WIDGET (c));
				g_object_unref (G_OBJECT (c));
			}
			g = g_list_previous (g);
		}

		g_list_free (go);
	}
}


#line 120 "xfce-mixer-view.c"
/* self casting macros */
#define SELF(x) XFCE_MIXER_VIEW(x)
#define SELF_CONST(x) XFCE_MIXER_VIEW_CONST(x)
#define IS_SELF(x) XFCE_IS_MIXER_VIEW(x)
#define TYPE_SELF XFCE_TYPE_MIXER_VIEW
#define SELF_CLASS(x) XFCE_MIXER_VIEW_CLASS(x)

#define SELF_GET_CLASS(x) XFCE_MIXER_VIEW_GET_CLASS(x)

/* self typedefs */
typedef XfceMixerView Self;
typedef XfceMixerViewClass SelfClass;

/* here are local prototypes */
static void xfce_mixer_view_class_init (XfceMixerViewClass * c) G_GNUC_UNUSED;
static void xfce_mixer_view_free_disclosure (XfceMixerView * self) G_GNUC_UNUSED;
static void xfce_mixer_view_toggled_cb (XfceMixerView * self, gpointer user_data) G_GNUC_UNUSED;
static void ___real_xfce_mixer_view_init_containers (XfceMixerView * self);
static void xfce_mixer_view_init (XfceMixerView * self) G_GNUC_UNUSED;
static void ___real_xfce_mixer_view_view_item_updated (XfceMixerView * self, XfceMixerControl * c, t_mixer_profile_item * p);
static void ___real_xfce_mixer_view_view_cleared (XfceMixerView * self);
static void ___real_xfce_mixer_view_profile_cleared (XfceMixerView * self);
static void ___real_xfce_mixer_view_profile_item_updated (XfceMixerView * self, t_mixer_profile_item * p);

/*
 * Signal connection wrapper macro shortcuts
 */
#define self_connect__profile_changed(object,func,data)	xfce_mixer_view_connect__profile_changed((object),(func),(data))
#define self_connect_after__profile_changed(object,func,data)	xfce_mixer_view_connect_after__profile_changed((object),(func),(data))
#define self_connect_data__profile_changed(object,func,data,destroy_data,flags)	xfce_mixer_view_connect_data__profile_changed((object),(func),(data),(destroy_data),(flags))

enum {
	PROFILE_CHANGED_SIGNAL,
	LAST_SIGNAL
};

static guint object_signals[LAST_SIGNAL] = {0};

/* pointer to the class of our parent */
static GtkVBoxClass *parent_class = NULL;

/* Short form macros */
#define self_free_disclosure xfce_mixer_view_free_disclosure
#define self_save_state xfce_mixer_view_save_state
#define self_load_state xfce_mixer_view_load_state
#define self_add_control xfce_mixer_view_add_control
#define self_del_control xfce_mixer_view_del_control
#define self_new xfce_mixer_view_new
#define self_clear_controls xfce_mixer_view_clear_controls
#define self_switches_updated xfce_mixer_view_switches_updated
#define self_toggled_cb xfce_mixer_view_toggled_cb
#define self_profile_changed xfce_mixer_view_profile_changed
#define self_init_containers xfce_mixer_view_init_containers
#define self_find_container xfce_mixer_view_find_container
#define self_pack_control xfce_mixer_view_pack_control
#define self_set_profile xfce_mixer_view_set_profile
#define self_get_profile xfce_mixer_view_get_profile
#define self_view_item_updated xfce_mixer_view_view_item_updated
#define self_view_cleared xfce_mixer_view_view_cleared
#define self_profile_cleared xfce_mixer_view_profile_cleared
#define self_refresh_value xfce_mixer_view_refresh_value
#define self_profile_item_updated xfce_mixer_view_profile_item_updated
GType
xfce_mixer_view_get_type (void)
{
	static GType type = 0;

	if ___GOB_UNLIKELY(type == 0) {
		static const GTypeInfo info = {
			sizeof (XfceMixerViewClass),
			(GBaseInitFunc) NULL,
			(GBaseFinalizeFunc) NULL,
			(GClassInitFunc) xfce_mixer_view_class_init,
			(GClassFinalizeFunc) NULL,
			NULL /* class_data */,
			sizeof (XfceMixerView),
			0 /* n_preallocs */,
			(GInstanceInitFunc) xfce_mixer_view_init,
			NULL
		};

		type = g_type_register_static (GTK_TYPE_VBOX, "XfceMixerView", &info, (GTypeFlags)0);
	}

	return type;
}

/* a macro for creating a new object of our type */
#define GET_NEW ((XfceMixerView *)g_object_new(xfce_mixer_view_get_type(), NULL))

/* a function for creating a new object of our type */
#include <stdarg.h>
static XfceMixerView * GET_NEW_VARG (const char *first, ...) G_GNUC_UNUSED;
static XfceMixerView *
GET_NEW_VARG (const char *first, ...)
{
	XfceMixerView *ret;
	va_list ap;
	va_start (ap, first);
	ret = (XfceMixerView *)g_object_new_valist (xfce_mixer_view_get_type (), first, ap);
	va_end (ap);
	return ret;
}


static void
___finalize(GObject *obj_self)
{
#define __GOB_FUNCTION__ "Xfce:Mixer:View::finalize"
	XfceMixerView *self G_GNUC_UNUSED = XFCE_MIXER_VIEW (obj_self);
	if(G_OBJECT_CLASS(parent_class)->finalize) \
		(* G_OBJECT_CLASS(parent_class)->finalize)(obj_self);
#define disclosure (self->disclosure)
#define VAR disclosure
	{
#line 96 "mixer-view.gob"
	
			self_free_disclosure (self);
		}
#line 240 "xfce-mixer-view.c"
	memset(&disclosure, 0, sizeof(disclosure));
#undef VAR
#undef disclosure
#define controls (self->controls)
#define VAR controls
	{
#line 103 "mixer-view.gob"
	
			control_list_free(VAR);
			VAR = NULL;
		}
#line 252 "xfce-mixer-view.c"
	memset(&controls, 0, sizeof(controls));
#undef VAR
#undef controls
#define profile (self->profile)
#define VAR profile
	{
#line 113 "mixer-view.gob"
	
			self->destruction = TRUE;
			self_set_profile (self, NULL);
		}
#line 264 "xfce-mixer-view.c"
	memset(&profile, 0, sizeof(profile));
#undef VAR
#undef profile
}
#undef __GOB_FUNCTION__

static void 
xfce_mixer_view_class_init (XfceMixerViewClass * c G_GNUC_UNUSED)
{
#define __GOB_FUNCTION__ "Xfce:Mixer:View::class_init"
	GObjectClass *g_object_class G_GNUC_UNUSED = (GObjectClass*) c;

	parent_class = g_type_class_ref (GTK_TYPE_VBOX);

	object_signals[PROFILE_CHANGED_SIGNAL] =
		g_signal_new ("profile_changed",
			G_TYPE_FROM_CLASS (g_object_class),
			(GSignalFlags)(G_SIGNAL_RUN_FIRST | G_SIGNAL_ACTION),
			G_STRUCT_OFFSET (XfceMixerViewClass, profile_changed),
			NULL, NULL,
			g_cclosure_marshal_VOID__VOID,
			G_TYPE_NONE, 0);

	c->profile_changed = NULL;
#line 225 "mixer-view.gob"
	c->init_containers = ___real_xfce_mixer_view_init_containers;
#line 350 "mixer-view.gob"
	c->view_item_updated = ___real_xfce_mixer_view_view_item_updated;
#line 383 "mixer-view.gob"
	c->view_cleared = ___real_xfce_mixer_view_view_cleared;
#line 388 "mixer-view.gob"
	c->profile_cleared = ___real_xfce_mixer_view_profile_cleared;
#line 407 "mixer-view.gob"
	c->profile_item_updated = ___real_xfce_mixer_view_profile_item_updated;
#line 299 "xfce-mixer-view.c"
	g_object_class->finalize = ___finalize;
}
#undef __GOB_FUNCTION__
#line 284 "mixer-view.gob"
static void 
xfce_mixer_view_init (XfceMixerView * self G_GNUC_UNUSED)
#line 306 "xfce-mixer-view.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:View::init"
#line 61 "mixer-view.gob"
	self->switches_r = 0;
#line 311 "xfce-mixer-view.c"
#line 61 "mixer-view.gob"
	self->switches_c = 0;
#line 314 "xfce-mixer-view.c"
#line 61 "mixer-view.gob"
	self->selects_r = 0;
#line 317 "xfce-mixer-view.c"
#line 61 "mixer-view.gob"
	self->selects_c = 0;
#line 320 "xfce-mixer-view.c"
#line 96 "mixer-view.gob"
	self->controls = NULL;
#line 323 "xfce-mixer-view.c"
#line 103 "mixer-view.gob"
	self->destruction = FALSE;
#line 326 "xfce-mixer-view.c"
#line 103 "mixer-view.gob"
	self->profile = NULL;
#line 329 "xfce-mixer-view.c"
 {
#line 284 "mixer-view.gob"

		self->kind = K_NORMAL;

		self_init_containers (self);

		self_switches_updated (self);
	
#line 339 "xfce-mixer-view.c"
 }
}
#undef __GOB_FUNCTION__


#line 118 "mixer-view.gob"
static void 
xfce_mixer_view_free_disclosure (XfceMixerView * self)
#line 348 "xfce-mixer-view.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:View::free_disclosure"
#line 118 "mixer-view.gob"
	g_return_if_fail (self != NULL);
#line 118 "mixer-view.gob"
	g_return_if_fail (XFCE_IS_MIXER_VIEW (self));
#line 355 "xfce-mixer-view.c"
{
#line 119 "mixer-view.gob"
	
		self->disclosure = NULL;
	}}
#line 361 "xfce-mixer-view.c"
#undef __GOB_FUNCTION__

#line 123 "mixer-view.gob"
void 
xfce_mixer_view_save_state (XfceMixerView * self, XfceMixerPxml * xml)
#line 367 "xfce-mixer-view.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:View::save_state"
#line 123 "mixer-view.gob"
	g_return_if_fail (self != NULL);
#line 123 "mixer-view.gob"
	g_return_if_fail (XFCE_IS_MIXER_VIEW (self));
#line 374 "xfce-mixer-view.c"
{
#line 124 "mixer-view.gob"
	
		gint act;
		if (!self->disclosure)
			return;

		act = gtk_toggle_button_get_active (GTK_TOGGLE_BUTTON (self->disclosure)) ? 1 : 0;

		if (!xfce_mixer_pxml_goto_child_tag (xml, "disclosure")) 
			xfce_mixer_pxml_goto_node (xml, 
				xfce_mixer_pxml_create_text_child (xml, "disclosure", NULL)
			);

		xfce_mixer_pxml_set_prop_int (xml, "expanded", act);
	}}
#line 391 "xfce-mixer-view.c"
#undef __GOB_FUNCTION__

#line 139 "mixer-view.gob"
void 
xfce_mixer_view_load_state (XfceMixerView * self, XfceMixerPxml * xml)
#line 397 "xfce-mixer-view.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:View::load_state"
#line 139 "mixer-view.gob"
	g_return_if_fail (self != NULL);
#line 139 "mixer-view.gob"
	g_return_if_fail (XFCE_IS_MIXER_VIEW (self));
#line 404 "xfce-mixer-view.c"
{
#line 140 "mixer-view.gob"
	
		gint act;
		if (!self->disclosure)
			return;

		if (xfce_mixer_pxml_goto_child_tag (xml, "disclosure")) {
			if (xfce_mixer_pxml_get_prop_int (xml, "expanded", &act)) {
				gtk_toggle_button_set_active (
					GTK_TOGGLE_BUTTON (self->disclosure),
					act != 0 ? TRUE: FALSE
				);
				if (act) {
				} else {
				}
			}
		}
	}}
#line 424 "xfce-mixer-view.c"
#undef __GOB_FUNCTION__

#line 158 "mixer-view.gob"
XfceMixerControl * 
xfce_mixer_view_add_control (XfceMixerView * self, XfceMixerControl * c)
#line 430 "xfce-mixer-view.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:View::add_control"
#line 158 "mixer-view.gob"
	g_return_val_if_fail (self != NULL, (XfceMixerControl * )0);
#line 158 "mixer-view.gob"
	g_return_val_if_fail (XFCE_IS_MIXER_VIEW (self), (XfceMixerControl * )0);
#line 437 "xfce-mixer-view.c"
{
#line 159 "mixer-view.gob"
	
		g_object_ref (G_OBJECT (c));
		gtk_object_sink (GTK_OBJECT (c));
		self->controls = g_list_append (self->controls, c);
		return c;
	}}
#line 446 "xfce-mixer-view.c"
#undef __GOB_FUNCTION__

#line 166 "mixer-view.gob"
void 
xfce_mixer_view_del_control (XfceMixerView * self, XfceMixerControl * c)
#line 452 "xfce-mixer-view.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:View::del_control"
#line 166 "mixer-view.gob"
	g_return_if_fail (self != NULL);
#line 166 "mixer-view.gob"
	g_return_if_fail (XFCE_IS_MIXER_VIEW (self));
#line 459 "xfce-mixer-view.c"
{
#line 167 "mixer-view.gob"
	
		if (g_list_index (self->controls, c) > -1) {
			self->controls = g_list_remove (self->controls, c);
			gtk_widget_destroy (GTK_WIDGET (c));
			g_object_unref (c);
		}
	}}
#line 469 "xfce-mixer-view.c"
#undef __GOB_FUNCTION__

#line 175 "mixer-view.gob"
XfceMixerView * 
xfce_mixer_view_new (void)
#line 475 "xfce-mixer-view.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:View::new"
{
#line 176 "mixer-view.gob"
	
		return XFCE_MIXER_VIEW (GET_NEW);
	}}
#line 483 "xfce-mixer-view.c"
#undef __GOB_FUNCTION__

#line 180 "mixer-view.gob"
void 
xfce_mixer_view_clear_controls (XfceMixerView * self)
#line 489 "xfce-mixer-view.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:View::clear_controls"
#line 180 "mixer-view.gob"
	g_return_if_fail (self != NULL);
#line 180 "mixer-view.gob"
	g_return_if_fail (XFCE_IS_MIXER_VIEW (self));
#line 496 "xfce-mixer-view.c"
{
#line 181 "mixer-view.gob"
	
		control_list_free (self->controls);
		self->controls = NULL;
		self->switches_r = 0;
		self->switches_c = 0;
		self->selects_r = 0;
		self->selects_c = 0;
		self_switches_updated (self);
	}}
#line 508 "xfce-mixer-view.c"
#undef __GOB_FUNCTION__

#line 191 "mixer-view.gob"
void 
xfce_mixer_view_switches_updated (XfceMixerView * self)
#line 514 "xfce-mixer-view.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:View::switches_updated"
#line 191 "mixer-view.gob"
	g_return_if_fail (self != NULL);
#line 191 "mixer-view.gob"
	g_return_if_fail (XFCE_IS_MIXER_VIEW (self));
#line 521 "xfce-mixer-view.c"
{
#line 192 "mixer-view.gob"
	
		gboolean has_sw;
		has_sw = (self->switches_r > 0) || (self->switches_c > 0)
		|| (self->selects_r > 0) || (self->selects_c > 0);
		if (!self->disclosure)
			return;

		if (has_sw)
			gtk_widget_show (GTK_WIDGET (self->disclosure));
		else
			gtk_widget_hide (GTK_WIDGET (self->disclosure));
	}}
#line 536 "xfce-mixer-view.c"
#undef __GOB_FUNCTION__

#line 205 "mixer-view.gob"
static void 
xfce_mixer_view_toggled_cb (XfceMixerView * self, gpointer user_data)
#line 542 "xfce-mixer-view.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:View::toggled_cb"
#line 205 "mixer-view.gob"
	g_return_if_fail (self != NULL);
#line 205 "mixer-view.gob"
	g_return_if_fail (XFCE_IS_MIXER_VIEW (self));
#line 549 "xfce-mixer-view.c"
{
#line 206 "mixer-view.gob"
	 /* this function is a bit hacky, its for shrinking the window 
             after the disclosure widget was closed 
	  */ 
		GtkWidget *win;
		gboolean b;
        
		b = gtk_toggle_button_get_active (GTK_TOGGLE_BUTTON (user_data));

		if (!b) {
			win = gtk_widget_get_toplevel (GTK_WIDGET (user_data));
			g_timeout_add (250 /*500*/, idle_cb, win);
		}
	}}
#line 565 "xfce-mixer-view.c"
#undef __GOB_FUNCTION__

#line 220 "mixer-view.gob"
void 
xfce_mixer_view_profile_changed (XfceMixerView * self)
#line 571 "xfce-mixer-view.c"
{
	GValue ___param_values[1];
	GValue ___return_val;

memset (&___return_val, 0, sizeof (___return_val));
memset (&___param_values, 0, sizeof (___param_values));

#line 220 "mixer-view.gob"
	g_return_if_fail (self != NULL);
#line 220 "mixer-view.gob"
	g_return_if_fail (XFCE_IS_MIXER_VIEW (self));
#line 583 "xfce-mixer-view.c"

	___param_values[0].g_type = 0;
	g_value_init (&___param_values[0], G_TYPE_FROM_INSTANCE (self));
	g_value_set_instance (&___param_values[0], (gpointer) self);

	g_signal_emitv (___param_values,
		object_signals[PROFILE_CHANGED_SIGNAL],
		0 /* detail */,
		&___return_val);

	g_value_unset (&___param_values[0]);
}

#line 225 "mixer-view.gob"
void 
xfce_mixer_view_init_containers (XfceMixerView * self)
#line 600 "xfce-mixer-view.c"
{
	XfceMixerViewClass *klass;
#line 225 "mixer-view.gob"
	g_return_if_fail (self != NULL);
#line 225 "mixer-view.gob"
	g_return_if_fail (XFCE_IS_MIXER_VIEW (self));
#line 607 "xfce-mixer-view.c"
	klass = XFCE_MIXER_VIEW_GET_CLASS(self);

	if(klass->init_containers)
		(*klass->init_containers)(self);
}
#line 225 "mixer-view.gob"
static void 
___real_xfce_mixer_view_init_containers (XfceMixerView * self G_GNUC_UNUSED)
#line 616 "xfce-mixer-view.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:View::init_containers"
{
#line 226 "mixer-view.gob"
	
		self->vbox = GTK_BOX (gtk_vbox_new (FALSE, 5));
		gtk_widget_show (GTK_WIDGET (self->vbox));
		self->sliders = GTK_BOX (gtk_hbox_new (FALSE, 5));
		gtk_widget_set_size_request (GTK_WIDGET (self->sliders), -1, SLIDER_HEIGHT);

		self->swsliders = gtk_scrolled_window_new (NULL, NULL);
		gtk_scrolled_window_set_policy (
			GTK_SCROLLED_WINDOW (self->swsliders), 
			GTK_POLICY_AUTOMATIC, GTK_POLICY_NEVER
		);
		gtk_scrolled_window_add_with_viewport (
			GTK_SCROLLED_WINDOW (self->swsliders),
			GTK_WIDGET (self->sliders)
		);
		gtk_widget_show (self->swsliders);

		gtk_widget_show (GTK_WIDGET (self->sliders));

		self->switches = GTK_TABLE (gtk_table_new (SWITCH_ROWS, SWITCH_COLUMNS, FALSE));
		self->selects = GTK_TABLE (gtk_table_new (SWITCH_ROWS, SWITCH_COLUMNS, FALSE));
		gtk_table_set_row_spacings (GTK_TABLE (self->selects), 7);
		gtk_table_set_col_spacings (GTK_TABLE (self->selects), 7);
		gtk_container_set_border_width (GTK_CONTAINER (self->selects), 5);
		gtk_container_set_border_width (GTK_CONTAINER (self->switches), 5);
		gtk_widget_show (GTK_WIDGET (self->switches));
		gtk_widget_show (GTK_WIDGET (self->selects));

		self->tables = GTK_BOX (gtk_vbox_new (FALSE, 5));
		gtk_box_pack_start (self->tables, GTK_WIDGET (self->switches), FALSE, FALSE, 0);
		gtk_box_pack_start (self->tables, GTK_WIDGET (self->selects), FALSE, FALSE, 0);

		self->disclosure = cddb_disclosure_new (
			_("Show Switches"),
			_("Hide Switches")
		);

		g_signal_connect_swapped (
			G_OBJECT (self->disclosure), 
			"toggled", G_CALLBACK (self_toggled_cb), self
		);

		/*self->disclosure = gtk_vbox_new (FALSE, 0);*/ /* todo */
		gtk_widget_show (GTK_WIDGET (self->disclosure));
		cddb_disclosure_set_container (CDDB_DISCLOSURE (self->disclosure), GTK_WIDGET (self->tables));

		gtk_box_pack_start (self->vbox, GTK_WIDGET (self->swsliders), TRUE, TRUE, 0);
		gtk_box_pack_start (self->vbox, GTK_WIDGET (self->disclosure), FALSE, FALSE, 0);
		gtk_box_pack_start (self->vbox, GTK_WIDGET (self->tables), TRUE, TRUE, 0);

		/*gtk_container_add (GTK_CONTAINER (self), GTK_WIDGET (self->vbox));*/
		gtk_box_pack_start (GTK_BOX (self), GTK_WIDGET (self->vbox), TRUE, TRUE, 0);

		gtk_widget_set_name (GTK_WIDGET (self->sliders), "sliders");
		gtk_widget_set_name (GTK_WIDGET (self->switches), "switches");

	}}
#line 678 "xfce-mixer-view.c"
#undef __GOB_FUNCTION__


#line 292 "mixer-view.gob"
GtkContainer * 
xfce_mixer_view_find_container (XfceMixerView * self, gchar const * name)
#line 685 "xfce-mixer-view.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:View::find_container"
#line 292 "mixer-view.gob"
	g_return_val_if_fail (self != NULL, (GtkContainer * )0);
#line 292 "mixer-view.gob"
	g_return_val_if_fail (XFCE_IS_MIXER_VIEW (self), (GtkContainer * )0);
#line 692 "xfce-mixer-view.c"
{
#line 293 "mixer-view.gob"
	
		if (name) {
			if (g_str_equal (name, "sliders")) return GTK_CONTAINER (self->sliders);
			else if (g_str_equal (name, "switches")) return GTK_CONTAINER (self->switches);
			else if (g_str_equal (name, "selects")) return GTK_CONTAINER (self->selects);
		}
		return GTK_CONTAINER (self->vbox);
	}}
#line 703 "xfce-mixer-view.c"
#undef __GOB_FUNCTION__

#line 302 "mixer-view.gob"
void 
xfce_mixer_view_pack_control (XfceMixerView * self, XfceMixerControl * c, t_mixer_profile_item * p)
#line 709 "xfce-mixer-view.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:View::pack_control"
#line 302 "mixer-view.gob"
	g_return_if_fail (self != NULL);
#line 302 "mixer-view.gob"
	g_return_if_fail (XFCE_IS_MIXER_VIEW (self));
#line 716 "xfce-mixer-view.c"
{
#line 303 "mixer-view.gob"
	
		GtkContainer *cont;
		GtkBox *box;
		gtk_widget_show (GTK_WIDGET (c));

		cont = self_find_container (self, p->location);

		if (GTK_IS_BOX (cont)) {
			box = GTK_BOX (cont);

			gtk_box_pack_start (box, GTK_WIDGET (c), FALSE, FALSE, 3);
		} else if ((gpointer)cont == (gpointer)self->switches) {
			my_table_allocator (GTK_TABLE (self->switches), &self->switches_c, &self->switches_r, c);
			self_switches_updated (self);
		} else if ((gpointer)cont == (gpointer)self->selects) {
			my_table_allocator (GTK_TABLE (self->selects), &self->selects_c, &self->selects_r, c);
			self_switches_updated (self);
		}
	}}
#line 738 "xfce-mixer-view.c"
#undef __GOB_FUNCTION__

#line 323 "mixer-view.gob"
void 
xfce_mixer_view_set_profile (XfceMixerView * self, XfceMixerProfile * p)
#line 744 "xfce-mixer-view.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:View::set_profile"
#line 323 "mixer-view.gob"
	g_return_if_fail (self != NULL);
#line 323 "mixer-view.gob"
	g_return_if_fail (XFCE_IS_MIXER_VIEW (self));
#line 751 "xfce-mixer-view.c"
{
#line 324 "mixer-view.gob"
	
		if (p)
			g_object_ref (G_OBJECT (p));

		if (self->profile) {
			xfce_mixer_profile_unregister_view (self->profile, self);
			g_object_unref (G_OBJECT (self->profile));
			self->profile = NULL;
		}
		self_clear_controls (self);
		self->profile = p;

		self_view_cleared (self);

		if (p)
			xfce_mixer_profile_register_view (self->profile, self);

		if (!self->destruction)
			emit self_profile_changed (self);
	}}
#line 774 "xfce-mixer-view.c"
#undef __GOB_FUNCTION__

#line 345 "mixer-view.gob"
XfceMixerProfile const * 
xfce_mixer_view_get_profile (XfceMixerView * self)
#line 780 "xfce-mixer-view.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:View::get_profile"
#line 345 "mixer-view.gob"
	g_return_val_if_fail (self != NULL, (XfceMixerProfile const * )0);
#line 345 "mixer-view.gob"
	g_return_val_if_fail (XFCE_IS_MIXER_VIEW (self), (XfceMixerProfile const * )0);
#line 787 "xfce-mixer-view.c"
{
#line 346 "mixer-view.gob"
	
		return (self->profile);
	}}
#line 793 "xfce-mixer-view.c"
#undef __GOB_FUNCTION__

#line 350 "mixer-view.gob"
void 
xfce_mixer_view_view_item_updated (XfceMixerView * self, XfceMixerControl * c, t_mixer_profile_item * p)
#line 799 "xfce-mixer-view.c"
{
	XfceMixerViewClass *klass;
#line 350 "mixer-view.gob"
	g_return_if_fail (self != NULL);
#line 350 "mixer-view.gob"
	g_return_if_fail (XFCE_IS_MIXER_VIEW (self));
#line 806 "xfce-mixer-view.c"
	klass = XFCE_MIXER_VIEW_GET_CLASS(self);

	if(klass->view_item_updated)
		(*klass->view_item_updated)(self,c,p);
}
#line 350 "mixer-view.gob"
static void 
___real_xfce_mixer_view_view_item_updated (XfceMixerView * self G_GNUC_UNUSED, XfceMixerControl * c, t_mixer_profile_item * p)
#line 815 "xfce-mixer-view.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:View::view_item_updated"
{
#line 351 "mixer-view.gob"
	
		GtkBox *box;
		GtkContainer *cont, *cont2;
		if (p->orderno == -1) {
			self_del_control (self, c);
			return;
		}

		cont = self_find_container (self, p->location);
		cont2 = NULL;

		if (c) { /* was present before */
			cont2 = self_find_container (self, c->location);
			if (cont2 && cont2 == cont) { /* stayed in same container */
				box = GTK_BOX (cont);
				gtk_box_reorder_child (box, GTK_WIDGET (c), p->orderno);
				return;
			}
		}

		if (c) { /* was present before, and something is very different */
			/* unpack */
			self_del_control (self, c);
		}

		c = xfce_mixer_control_factory_new_from_profile_item (p, self->kind);
		if (c) {
			self_add_control (self, c);
			self_pack_control (self, c, p);
		}
	}}
#line 851 "xfce-mixer-view.c"
#undef __GOB_FUNCTION__

#line 383 "mixer-view.gob"
void 
xfce_mixer_view_view_cleared (XfceMixerView * self)
#line 857 "xfce-mixer-view.c"
{
	XfceMixerViewClass *klass;
#line 383 "mixer-view.gob"
	g_return_if_fail (self != NULL);
#line 383 "mixer-view.gob"
	g_return_if_fail (XFCE_IS_MIXER_VIEW (self));
#line 864 "xfce-mixer-view.c"
	klass = XFCE_MIXER_VIEW_GET_CLASS(self);

	if(klass->view_cleared)
		(*klass->view_cleared)(self);
}
#line 383 "mixer-view.gob"
static void 
___real_xfce_mixer_view_view_cleared (XfceMixerView * self G_GNUC_UNUSED)
#line 873 "xfce-mixer-view.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:View::view_cleared"
{
#line 384 "mixer-view.gob"
	
		self_clear_controls (self);
	}}
#line 881 "xfce-mixer-view.c"
#undef __GOB_FUNCTION__

#line 388 "mixer-view.gob"
void 
xfce_mixer_view_profile_cleared (XfceMixerView * self)
#line 887 "xfce-mixer-view.c"
{
	XfceMixerViewClass *klass;
#line 388 "mixer-view.gob"
	g_return_if_fail (self != NULL);
#line 388 "mixer-view.gob"
	g_return_if_fail (XFCE_IS_MIXER_VIEW (self));
#line 894 "xfce-mixer-view.c"
	klass = XFCE_MIXER_VIEW_GET_CLASS(self);

	if(klass->profile_cleared)
		(*klass->profile_cleared)(self);
}
#line 388 "mixer-view.gob"
static void 
___real_xfce_mixer_view_profile_cleared (XfceMixerView * self G_GNUC_UNUSED)
#line 903 "xfce-mixer-view.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:View::profile_cleared"
{
#line 389 "mixer-view.gob"
	
		self_view_cleared (self);
	}}
#line 911 "xfce-mixer-view.c"
#undef __GOB_FUNCTION__

#line 393 "mixer-view.gob"
void 
xfce_mixer_view_refresh_value (XfceMixerView * self, gchar const * vcname)
#line 917 "xfce-mixer-view.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:View::refresh_value"
#line 393 "mixer-view.gob"
	g_return_if_fail (self != NULL);
#line 393 "mixer-view.gob"
	g_return_if_fail (XFCE_IS_MIXER_VIEW (self));
#line 924 "xfce-mixer-view.c"
{
#line 394 "mixer-view.gob"
	
		GList *g;
		XfceMixerControl *c;
		g = self->controls;
		while (g) {
			c = XFCE_MIXER_CONTROL (g->data);
			if ((!vcname) || (vcname && c->vcname && g_str_equal (c->vcname, vcname))) {
				xfce_mixer_control_vc_feed_value (c);
			}
			g = g_list_next (g);
		}
	}}
#line 939 "xfce-mixer-view.c"
#undef __GOB_FUNCTION__

#line 407 "mixer-view.gob"
void 
xfce_mixer_view_profile_item_updated (XfceMixerView * self, t_mixer_profile_item * p)
#line 945 "xfce-mixer-view.c"
{
	XfceMixerViewClass *klass;
#line 407 "mixer-view.gob"
	g_return_if_fail (self != NULL);
#line 407 "mixer-view.gob"
	g_return_if_fail (XFCE_IS_MIXER_VIEW (self));
#line 952 "xfce-mixer-view.c"
	klass = XFCE_MIXER_VIEW_GET_CLASS(self);

	if(klass->profile_item_updated)
		(*klass->profile_item_updated)(self,p);
}
#line 407 "mixer-view.gob"
static void 
___real_xfce_mixer_view_profile_item_updated (XfceMixerView * self G_GNUC_UNUSED, t_mixer_profile_item * p)
#line 961 "xfce-mixer-view.c"
{
#define __GOB_FUNCTION__ "Xfce:Mixer:View::profile_item_updated"
{
#line 408 "mixer-view.gob"
	
		/* vcname: name of the add/del/upd'd control */
		gchar *s;
		GList *g;
		XfceMixerControl *control;
		gboolean found;

		g = self->controls;
		if (!p || !p->vcname)
			return;

		found = FALSE;

		while (g) {
			control = XFCE_MIXER_CONTROL (g->data);
			if (control) {
				g_object_get (G_OBJECT (control), XFCE_MIXER_CONTROL_GET_PROP_VCNAME (&s), NULL );
				if (s) {
					if (g_str_equal (s, p->vcname)) {
						/*TRACEY ("=> %s\n", s);*/
						self_view_item_updated (self, control, p);
						found = TRUE;
					}
					g_free (s);
				}
			}
			g = g_list_next (g);
		}

		if (!found) {
			self_view_item_updated (self, NULL, p);
		}
	}}
#line 999 "xfce-mixer-view.c"
#undef __GOB_FUNCTION__
